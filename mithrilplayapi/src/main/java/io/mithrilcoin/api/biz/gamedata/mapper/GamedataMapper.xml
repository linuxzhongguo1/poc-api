<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.mithrilcoin.api.biz.gamedata.mapper.GamedataMapper">
	<select id="selectMassPlaystoreappinfo" parameterType="int" resultType="io.mithril.vo.playdata.Playstoreappinfo">
		<![CDATA[
		  SELECT 
			IDX
			,PACKAGE AS PACKAGENAME
			,TITLE
		FROM PLAYSTOREAPPINFO
		WHERE IDX > #{startidx}
		LIMIT #{pagecount}, #{size}
		]]>
		
	</select>
	<select id="selectTodayPlayData" parameterType="long" resultType="io.mithril.vo.playdata.TemporalPlayData">
		SELECT 
			 IDX
			,MEMBER_IDX
			,PACKAGENAME
			,STATE
			,REWARD
			,TXNUMBER
			,TITLE
			,REGISTDATE AS playdate
		FROM PLAYDATA
		WHERE 
			MEMBER_IDX = #{member_idx}
			AND DATE(REGISTDATE) = CURRENT_DATE()	
	</select>
	<insert id="insertPlayData" parameterType="io.mithril.vo.playdata.PlayData" useGeneratedKeys="true" keyProperty="idx">
		INSERT INTO PLAYDATA
			(
				 MEMBER_IDX
				,PACKAGENAME
				,TITLE
				,TYPECODE
				,PLAYTIME
				,STATE
				,MODIFY_MEMBER_ID
				,REGISTDATE
				,MODIFYDATE
			)
			VALUES
			(
				 #{member_idx}
				,#{packagename}
				,#{title}
				,#{typecode}
				,#{playtime}
				,#{state}
				,#{modify_member_id}
				,NOW()
				,NOW()
			)
	</insert>
</mapper>